apiVersion: v1
kind: ConfigMap
metadata:
  name: aether-backend-config
  namespace: aether-be
  labels:
    app: aether-backend
data:
  # Server Configuration
  PORT: "8080"
  HOST: "0.0.0.0"
  GIN_MODE: "release"

  # Neo4j Configuration (application-specific, running in same namespace)
  NEO4J_URI: "bolt+ssc://neo4j.aether-be.svc.cluster.local:7687"
  NEO4J_DATABASE: "neo4j"
  NEO4J_TLS_INSECURE: "true"

  # Shared Services (cross-namespace references)
  REDIS_ADDR: "redis-shared.tas-shared:6379"
  REDIS_DB: "0"

  # Keycloak Configuration
  # Use internal service for OIDC provider discovery
  # With KC_HOSTNAME_STRICT=false and KC_HOSTNAME=keycloak.tas.scharber.com,
  # Keycloak returns http://keycloak.tas.scharber.com for HTTP requests
  KEYCLOAK_URL: "http://keycloak-shared.tas-shared:8080"
  KEYCLOAK_ALLOWED_ISSUERS: "http://keycloak-shared.tas-shared:8080/realms/aether,https://keycloak.tas.scharber.com/realms/aether,http://keycloak.tas.scharber.com/realms/aether"
  KEYCLOAK_REALM: "aether"
  KEYCLOAK_CLIENT_ID: "aether-backend"

  # Storage Configuration
  STORAGE_ENABLED: "true"
  AWS_REGION: "us-east-1"
  S3_BUCKET: "aether-storage"
  S3_ENDPOINT: "http://minio-shared.tas-shared:9000"

  # Kafka Configuration
  KAFKA_BROKERS: "kafka-shared.tas-shared:9092"
  KAFKA_TOPIC_PREFIX: "aether"

  # External Services
  ROUTER_ENABLED: "true"
  ROUTER_SERVICE_BASE_URL: "http://llm-router.tas-llm-router:8086"
  ROUTER_USE_SERVICE_AUTH: "false"
  ROUTER_SERVICE_TIMEOUT: "30s"
  ROUTER_SERVICE_MAX_RETRIES: "3"
  ROUTER_SERVICE_CONNECT_TIMEOUT: "10s"

  # Agent Builder
  AGENT_BUILDER_URL: "http://agent-builder.tas-agent-builder:8087/api/v1"

  # AudiModal Configuration
  AUDIMODAL_ENABLED: "true"
  AUDIMODAL_BASE_URL: "http://audimodal.aether-be:8080"

  # Logging
  LOG_LEVEL: "debug"
  LOG_FORMAT: "json"
